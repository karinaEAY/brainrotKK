<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Змінено viewport, щоб заборонити масштабування -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Brainrot Items Generator</title>
    
    <!-- Підключення Tailwind CSS для стилізації -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Підключення шрифту Inter з Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <!-- Підключення 'canvas-confetti' для анімації -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    
    <style>
        /* Встановлюємо основний шрифт для всього документа */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(-45deg, #f3e8ff, #d8b4fe, #ffffff, #c084fc);
            background-size: 400% 400%;
            animation: gradient-animation 15s ease infinite;
            overflow-x: hidden;
            position: relative;
        }

        /* Анімація для градієнта фону */
        @keyframes gradient-animation {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* Фон-зображення для сторінки */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image: url('https://i.pinimg.com/1200x/9f/ea/7d/9fea7dc8631f61bd3e77a9503cd86331.jpg');
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            z-index: -2;
        }

        /* Напівпрозорий оверлей */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(17, 24, 39, 0.9);
            z-index: -1;
        }

        /* Стилі для генератора */
        .glow-panel {
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.45), inset 0 0 5px rgba(34, 197, 94, 0.4);
        }

        .fruit-card.selected {
            border-color: #f59e0b;
            transform: scale(1.05);
        }

        /* Специфічні тіні для вибраних карток */
        .fruit-card[data-fruit="La Spooky Grande"].selected { box-shadow: 0 0 20px rgba(34, 211, 238, 0.65); }
        .fruit-card[data-fruit="Spooky and Pumpky"].selected { box-shadow: 0 0 20px rgba(239, 68, 68, 0.65); }
        .fruit-card[data-fruit="Vampira Cappucina"].selected { box-shadow: 0 0 20px rgba(244, 114, 182, 0.65); }
        .fruit-card[data-fruit="Zombie Tralala"].selected { box-shadow: 0 0 20px rgba(250, 204, 21, 0.65); }
        .fruit-card[data-fruit="Frankentteo"].selected { box-shadow: 0 0 20px rgba(168, 85, 247, 0.65); }
        .fruit-card[data-fruit="La Vacca Jacko Lanterino"].selected { box-shadow: 0 0 20px rgba(245, 158, 11, 0.65); }
        .fruit-card[data-fruit="Eviledon"].selected { box-shadow: 0 0 20px rgba(56, 189, 248, 0.65); }
        .fruit-card[data-fruit="Vulturino Skeletono"].selected { box-shadow: 0 0 20px rgba(253, 224, 71, 0.65); }
        .fruit-card[data-fruit="Los Mobilis"].selected { box-shadow: 0 0 20px rgba(249, 115, 22, 0.65); }
        .fruit-card[data-fruit="Mieteteira Bicicleteira"].selected { box-shadow: 0 0 20px rgba(185, 28, 28, 0.65); }

        .neon-text {
            text-shadow:
                0 0 5px rgba(187, 247, 208, 0.8),
                0 0 10px rgba(134, 239, 172, 0.7),
                0 0 20px rgba(74, 222, 128, 0.6),
                0 0 40px rgba(34, 197, 94, 0.5),
                0 0 82px rgba(22, 163, 74, 0.4),
                0 0 92px rgba(21, 128, 61, 0.3);
        }

        .modal {
            display: none;
        }

        .modal.visible {
            display: flex;
        }

        .quantity-btn,
        .claim-btn {
            -webkit-tap-highlight-color: transparent;
        }

        .lime-glow {
            box-shadow: 0 0 8px rgba(163, 230, 53, 0.6), inset 0 0 3px rgba(163, 230, 53, 0.45);
        }

        /* Анімація "польоту" іконки */
        .flying-img {
            transition: left 0.8s cubic-bezier(0.3, 0, 0.8, 0.7),
                        top 0.8s cubic-bezier(0.3, 0, 0.8, 0.7),
                        transform 0.8s cubic-bezier(0.3, 0, 0.8, 0.7),
                        opacity 0.8s ease-in-out;
            border-radius: 50%;
            pointer-events: none;
        }

        /* Анімація "тремтіння" кнопки */
        @keyframes jiggle {
            0%,
            100% { transform: scale(1) rotate(0); }
            25% { transform: scale(1.1) rotate(-3deg); }
            75% { transform: scale(1.1) rotate(3deg); }
        }

        .jiggle {
            animation: jiggle 0.3s ease-in-out;
        }
    </style>
</head>
<body class="text-white antialiased">

    <!-- Макет смартфона -->
    <div class="relative w-full min-h-screen flex flex-col">
            
            <!-- Верхня частина екрана (статус-бар) -->
            <!-- (Status bar removed) -->

            <!-- Основний контент генератора (з прокруткою) -->
            <div class="flex-grow relative z-10">
                <div class="container mx-auto px-4 py-8 pb-32 flex flex-col items-center justify-center min-h-screen">
                    <div class="bg-black/40 backdrop-blur-sm rounded-xl py-3 px-8 mb-4 border-2 border-green-500/50 glow-panel">
                        <h2 class="text-2xl sm:text-3xl font-black text-white uppercase tracking-widest">STEAL A BRAINROT</h2>
                    </div>

                    <h1 class="text-2xl sm:text-3xl font-black mb-8 text-center text-green-500 uppercase tracking-widest neon-text">ITEMS GENERATOR</h1>

                    <!-- Сітка з фруктами -->
                    <div id="fruitGrid" class="grid grid-cols-2 gap-4 md:gap-6 max-w-md mx-auto w-full">
                        <!-- La Spooky Grande -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="La Spooky Grande">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/q3q61QfJ/IMG-1363.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="La Spooky Grande" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">La Spooky Grande</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>

                        <!-- Spooky and Pumpky -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="Spooky and Pumpky">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/5WZycTrn/IMG-1364.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="Spooky and Pumpky" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">Spooky and Pumpky</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>

                        <!-- Vampira Cappucina -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="Vampira Cappucina">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/1pNYNZw/IMG-1365.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="Vampira Cappucina" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">Vampira Cappucina</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>

                        <!-- Zombie Tralala -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="Zombie Tralala">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/N6C5GmrH/IMG-1366.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="Zombie Tralala" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">Zombie Tralala</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>

                        <!-- Frankentteo -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="Frankentteo">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/cz1r6bD/IMG-1367.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="Frankentteo" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">Frankentteo</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>

                        <!-- La Vacca Jacko Lanterino -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="La Vacca Jacko Lanterino">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/mVVv7nkt/IMG-1368.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="La Vacca Jacko Lanterino" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">La Vacca Jacko Lanterino</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>

                        <!-- Eviledon -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="Eviledon">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/hxBxz12f/IMG-1369.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="Eviledon" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">Eviledon</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>

                        <!-- Vulturino Skeletono -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="Vulturino Skeletono">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/h1sC72dv/IMG-1370.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="Vulturino Skeletono" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">Vulturino Skeletono</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>

                        <!-- Los Mobilis -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="Los Mobilis">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/x8mSSK0T/IMG-1371.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="Los Mobilis" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">Los Mobilis</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>

                        <!-- Mieteteira Bicicleteira -->
                        <div class="fruit-card bg-black/30 backdrop-blur-sm rounded-lg p-4 flex flex-col items-center justify-between aspect-square cursor-pointer border-2 border-white/10 transition-all duration-300" data-fruit="Mieteteira Bicicleteira">
                            <div class="flex flex-col items-center text-center">
                                <img src="https://i.ibb.co/G4zfZDrq/IMG-1372.webp" onerror="this.onerror=null;this.src='https://placehold.co/80x80/1f2937/FFFFFF?text=Error';" alt="Mieteteira Bicicleteira" class="w-16 h-16 sm:w-20 sm:h-20 object-contain drop-shadow-lg">
                                <p class="font-semibold mt-2 h-12 flex items-center justify-center text-sm sm:text-base">Mieteteira Bicicleteira</p>
                            </div>
                            <div class="w-full mt-2 flex flex-col items-center space-y-2">
                                <div class="quantity-selector hidden flex items-center justify-center space-x-2">
                                    <button class="quantity-btn minus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">-</button>
                                    <span class="quantity-value text-lg font-bold w-4 text-center">1</span>
                                    <button class="quantity-btn plus-btn bg-green-600/60 rounded-md w-7 h-7 flex items-center justify-center text-lg font-bold hover:bg-green-500/60 transition" type="button">+</button>
                                </div>
                                <button class="claim-btn text-lime-400 font-bold py-2 px-6 rounded-md text-sm border border-lime-400/50 bg-lime-500/10 hover:bg-lime-500/20 transition-all duration-300 lime-glow" type="button">Collect</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Нижня кнопка "Continue" (всередині телефону) -->
            <div id="continueSection" class="fixed bottom-0 left-0 right-0 p-4 bg-gray-900/70 backdrop-blur-sm border-t border-white/10 z-20">
                <div class="max-w-sm mx-auto">
                    <button id="continueButton" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-md transition-all duration-200 transform hover:scale-105 shadow-lg shadow-green-500/40 flex items-center justify-center" type="button">
                        <span>Continue</span>
                        <div class="relative ml-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                            </svg>
                            <span id="cartCount" class="absolute -top-2 -right-3 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold">0</span>
                        </div>
                    </button>
                </div>
            </div>

    </div>

    <!-- Модальні вікна (поза телефоном, щоб перекривати всю сторінку) -->

    <!-- Модальне вікно для нікнейму -->
    <div id="nicknameModal" class="modal fixed inset-0 bg-black bg-opacity-70 items-center justify-center z-40 backdrop-blur-sm p-4">
        <div class="w-full max-w-sm mx-auto text-center">
            <div class="bg-gray-800/80 backdrop-blur-sm rounded-lg p-8 border-2 border-blue-500/50 shadow-lg shadow-blue-500/40 relative">
                <button id="closeNicknameModal" class="absolute top-2 right-3 text-gray-400 hover:text-white transition-colors text-3xl leading-none" type="button" aria-label="Close nickname modal">&times;</button>
                <h2 class="text-3xl font-bold mb-4 text-green-400">Your Nickname</h2>
                <div id="selectedItemsContainer" class="flex flex-wrap justify-center gap-2 mb-4 min-h-[56px]"></div>
                <input id="nicknameInput" type="text" placeholder="Enter your nickname" class="w-full bg-gray-700/80 backdrop-blur-sm border border-gray-600 rounded-md px-4 py-2 text-center text-white placeholder-gray-400 focus:ring-2 focus:ring-green-500 focus:outline-none transition">
                <button id="generateButton" class="mt-6 w-full bg-green-600 hover:bg-green-700 text-gray-900 font-bold py-3 px-6 rounded-md transition-transform duration-200 transform hover:scale-105 shadow-lg shadow-green-500/30" type="button">
                    Generate
                </button>
            </div>
        </div>
    </div>

    <!-- Модальне вікно завантаження -->
    <div id="loadingModal" class="modal fixed inset-0 bg-black bg-opacity-70 items-center justify-center z-50">
        <div class="flex flex-col items-center justify-center text-white">
            <svg class="animate-spin h-12 w-12 text-green-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" role="img" aria-label="Loading">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="text-xl font-semibold">Generating items...</p>
        </div>
    </div>

    <!-- Модальне вікно "Готово" -->
    <div id="doneModal" class="modal fixed inset-0 bg-black bg-opacity-70 items-center justify-center z-50 p-4">
        <div class="bg-gray-800 rounded-lg p-8 text-center shadow-2xl flex flex-col items-center">
            <svg class="w-16 h-16 text-green-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Success"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            <h2 class="text-2xl font-bold mb-2">Done!</h2>
            <p class="text-gray-300 mb-6">Your Brainrot has been successfully generated! You may check your account!</p>
            <button id="closeModalButton" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 text-lg rounded-md transition uppercase" type="button">
                ok
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Отримання всіх елементів DOM
            const fruitCards = document.querySelectorAll('.fruit-card');
            const continueButton = document.getElementById('continueButton');
            const nicknameModal = document.getElementById('nicknameModal');
            const closeNicknameModal = document.getElementById('closeNicknameModal');
            const generateButton = document.getElementById('generateButton');
            const nicknameInput = document.getElementById('nicknameInput');
            const doneModal = document.getElementById('doneModal');
            const closeModalButton = document.getElementById('closeModalButton');
            const cartCount = document.getElementById('cartCount');
            const selectedItemsContainer = document.getElementById('selectedItemsContainer');
            const loadingModal = document.getElementById('loadingModal');

            let cart = []; // Масив для зберігання "кошика"

            // Оновлення UI лічильника кошика
            const updateCartUI = () => {
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCount.textContent = totalItems;
            };

            // Анімація "польоту" іконки до кошика
            const flyToCart = (cardElement) => {
                const cartIcon = document.getElementById('cartCount');
                const imgToFly = cardElement.querySelector('img');

                if (!imgToFly || !cartIcon) {
                    return;
                }

                const startRect = imgToFly.getBoundingClientRect();
                const endRect = cartIcon.getBoundingClientRect();

                const flyingImg = imgToFly.cloneNode(true);
                flyingImg.style.position = 'fixed';
                flyingImg.classList.add('flying-img');
                flyingImg.style.left = `${startRect.left}px`;
                flyingImg.style.top = `${startRect.top}px`;
                flyingImg.style.width = `${startRect.width * 1.5}px`;
                flyingImg.style.height = `${startRect.height * 1.5}px`;
                flyingImg.style.zIndex = '9999';
                flyingImg.style.transform = 'translate(-16.67%, -16.67%)'; // Компенсація збільшення

                document.body.appendChild(flyingImg);

                // Початок анімації
                requestAnimationFrame(() => {
                    flyingImg.style.left = `${endRect.left + (endRect.width / 2)}px`;
                    flyingImg.style.top = `${endRect.top + (endRect.height / 2)}px`;
                    flyingImg.style.opacity = '0';
                    flyingImg.style.transform = 'scale(0.1)';
                });

                // Видалення елемента після анімації та "тремтіння" кнопки
                flyingImg.addEventListener('transitionend', () => {
                    flyingImg.remove();
                    continueButton.classList.add('jiggle');
                    setTimeout(() => {
                        continueButton.classList.remove('jiggle');
                    }, 300);
                }, { once: true });
            };

            // Видалення з кошика
            const removeFromCart = (fruitName) => {
                cart = cart.filter(item => item.name !== fruitName);
                updateCartUI();
            };

            // Встановлення кількості для картки
            const setCardQuantity = (card, value) => {
                const safeValue = Math.max(1, value);
                const quantityValue = card.querySelector('.quantity-value');
                if (quantityValue) {
                    quantityValue.textContent = safeValue;
                }
                card.dataset.quantity = String(safeValue);
            };

            // Скидання стану картки
            const resetCardState = (card) => {
                setCardQuantity(card, 1);
                const selector = card.querySelector('.quantity-selector');
                if (selector) {
                    selector.classList.add('hidden');
                }
                card.classList.remove('selected', 'active-selection');
            };

            // Додавання обробників подій до кожної картки
            fruitCards.forEach(card => {
                const fruitName = card.dataset.fruit;
                const claimBtn = card.querySelector('.claim-btn');
                const quantitySelector = card.querySelector('.quantity-selector');
                const minusBtn = card.querySelector('.minus-btn');
                const plusBtn = card.querySelector('.plus-btn');

                setCardQuantity(card, 1); // Початкова кількість

                // Клік на картку (для вибору/скасування)
                card.addEventListener('click', (event) => {
                    if (event.target.closest('.quantity-btn') || event.target.closest('.claim-btn')) {
                        return; // Ігнорувати, якщо клік був на кнопці
                    }

                    if (card.classList.contains('active-selection')) {
                        resetCardState(card);
                        removeFromCart(fruitName);
                    } else {
                        card.classList.add('active-selection');
                        if (quantitySelector) {
                            quantitySelector.classList.remove('hidden');
                        }
                    }
                });

                // Клік на кнопку "Claim"
                if (claimBtn) {
                    claimBtn.addEventListener('click', (event) => {
                        event.stopPropagation();

                        // Якщо селектор прихований, показати його
                        if (quantitySelector && quantitySelector.classList.contains('hidden')) {
                            card.classList.add('active-selection');
                            quantitySelector.classList.remove('hidden');
                            return;
                        }

                        // Додавання в кошик
                        card.classList.add('selected');
                        const currentQuantity = Number(card.dataset.quantity || '1');
                        const existingItem = cart.find(item => item.name === fruitName);
                        if (existingItem) {
                            existingItem.quantity = currentQuantity;
                        } else {
                            cart.push({ name: fruitName, quantity: currentQuantity });
                        }

                        flyToCart(card); // Анімація
                        updateCartUI(); // Оновлення лічильника
                    });
                }

                // Кнопка "мінус"
                if (minusBtn) {
                    minusBtn.addEventListener('click', (event) => {
                        event.stopPropagation();
                        const currentQuantity = Number(card.dataset.quantity || '1');
                        if (currentQuantity > 1) {
                            setCardQuantity(card, currentQuantity - 1);
                        }
                    });
                }

                // Кнопка "плюс"
                if (plusBtn) {
                    plusBtn.addEventListener('click', (event) => {
                        event.stopPropagation();
                        const currentQuantity = Number(card.dataset.quantity || '1');
                        setCardQuantity(card, currentQuantity + 1);
                    });
                }
            });

            // Кнопка "Continue"
            continueButton.addEventListener('click', () => {
                if (cart.length === 0) {
                    // "Тремтіння", якщо кошик порожній
                    continueButton.classList.add('jiggle');
                    setTimeout(() => continueButton.classList.remove('jiggle'), 300);
                    return;
                }

                // Заповнення модального вікна вибраними іконками
                selectedItemsContainer.innerHTML = '';
                cart.forEach(item => {
                    const originalCard = document.querySelector(`.fruit-card[data-fruit="${item.name}"]`);
                    if (originalCard) {
                        const originalImg = originalCard.querySelector('img');
                        if (!originalImg) {
                            return;
                        }
                        const img = originalImg.cloneNode(true);
                        img.className = 'w-14 h-14 object-contain drop-shadow-lg';
                        img.setAttribute('alt', `${item.name} icon`);
                        selectedItemsContainer.appendChild(img);
                    }
                });
                nicknameModal.classList.add('visible'); // Показати модальне вікно
                nicknameInput.focus();
            });

            // Закриття модального вікна нікнейму
            closeNicknameModal.addEventListener('click', () => {
                nicknameModal.classList.remove('visible');
            });

            // Кнопка "Generate"
            generateButton.addEventListener('click', () => {
                const nickname = nicknameInput.value.trim();
                if (nickname === '') {
                    // Валідація
                    nicknameInput.classList.add('border-red-500', 'placeholder-red-400');
                    nicknameInput.placeholder = 'Nickname cannot be empty!';
                    return;
                }

                nicknameInput.classList.remove('border-red-500', 'placeholder-red-400');
                nicknameInput.placeholder = 'Enter your nickname';

                nicknameModal.classList.remove('visible');
                loadingModal.classList.add('visible'); // Показати завантаження

                // Симуляція процесу генерації
                setTimeout(() => {
                    loadingModal.classList.remove('visible');
                    doneModal.classList.add('visible'); // Показати "Готово"

                    // Запуск конфетті (з бібліотеки)
                    const duration = 2000;
                    const animationEnd = Date.now() + duration;
                    const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 51 };

                    const randomInRange = (min, max) => Math.random() * (max - min) + min;

                    const interval = setInterval(() => {
                        const timeLeft = animationEnd - Date.now();
                        if (timeLeft <= 0) {
                            clearInterval(interval);
                            return;
                        }
                        const particleCount = 50 * (timeLeft / duration);
                        confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });
                        confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });
                    }, 250);
                }, 1500); // Затримка 1.5 сек
            });

            // Закриття модального вікна "Готово"
            closeModalButton.addEventListener('click', () => {
                doneModal.classList.remove('visible');

                // Скидання всього стану
                cart = [];
                updateCartUI();
                fruitCards.forEach(card => {
                    resetCardState(card);
                });
                nicknameInput.value = '';
            });
        });
    </script>
</body>
</html>




